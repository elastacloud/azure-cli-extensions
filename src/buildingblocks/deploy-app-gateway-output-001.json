{"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#", "contentVersion": "1.0.0.0", "parameters": {"applicationGateways": {"value": [{"subscriptionId": "2a8545f9-dc4c-43f5-aea4-7a4a5df8c835", "resourceGroupName": "mspnp", "id": "/subscriptions/2a8545f9-dc4c-43f5-aea4-7a4a5df8c835/resourceGroups/mspnp/providers/Microsoft.Network/ApplicationGateways/my-test-agw1", "name": "my-test-agw1", "location": "northeurope", "tags": {}, "properties": {"sku": {"size": "Medium", "capacity": 2, "tier": "WAF"}, "sslPolicy": {"policyType": "Custom", "cipherSuites": ["TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384", "TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256", "TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA"], "minProtocolVersion": "TLSv1_2"}, "gatewayIPConfigurations": [{"name": "appGatewayIpConfig", "subnetName": "default1"}], "frontendIPConfigurations": [{"subscriptionId": "2a8545f9-dc4c-43f5-aea4-7a4a5df8c835", "resourceGroupName": "mspnp", "location": "northeurope", "name": "appGatewayFrontendIP", "applicationGatewayType": "Public"}, {"subscriptionId": "2a8545f9-dc4c-43f5-aea4-7a4a5df8c835", "resourceGroupName": "mspnp", "location": "northeurope", "name": "testfec", "applicationGatewayType": "Internal", "internalApplicationGatewaySettings": {"subnetName": "default1"}}], "frontendPorts": [{"name": "appGatewayFrontendPort", "port": 80}, {"name": "list1-http1", "port": 81}, {"name": "list-http2", "port": 82}], "probes": [{"name": "p1", "protocol": "Http", "host": "contoso.com", "path": "/", "interval": 30, "timeout": 30, "unhealthyThreshold": 3, "match": {}}], "backendAddressPools": [{"name": "appGatewayBackendPool", "backendAddresses": [{"fqdn": "www.contoso.com"}]}, {"name": "bp2"}], "backendHttpSettingsCollection": [{"name": "appGatewayBackendHttpSettings", "port": 80, "protocol": "Http", "cookieBasedAffinity": "Disabled", "requestTimeout": 30, "probeEnabled": true}, {"name": "test-settings", "port": 80, "protocol": "Http", "cookieBasedAffinity": "Enabled", "requestTimeout": 20, "probeEnabled": true, "probeName": "p1"}], "httpListeners": [{"name": "appGatewayHttpListener", "frontendIPConfigurationName": "appGatewayFrontendIP", "frontendPortName": "appGatewayFrontendPort", "protocol": "Http"}, {"name": "list1", "frontendIPConfigurationName": "testfec", "frontendPortName": "list1-http1", "protocol": "Http"}, {"name": "list2", "frontendIPConfigurationName": "testfec", "frontendPortName": "list-http2", "protocol": "Http"}], "urlPathMaps": [{"name": "pb-rule1", "defaultBackendAddressPoolName": "appGatewayBackendPool", "defaultBackendHttpSettingsName": "appGatewayBackendHttpSettings", "pathRules": [{"name": "p1", "paths": ["/foo"], "backendAddressPoolName": "bp2", "backendHttpSettingsName": "test-settings"}, {"name": "p2", "paths": ["/bar"], "backendAddressPoolName": "appGatewayBackendPool", "backendHttpSettingsName": "appGatewayBackendHttpSettings"}]}], "requestRoutingRules": [{"name": "rule1", "httpListenerName": "appGatewayHttpListener", "ruleType": "Basic", "backendAddressPoolName": "appGatewayBackendPool", "backendHttpSettingsName": "appGatewayBackendHttpSettings"}, {"name": "rule2", "httpListenerName": "list1", "ruleType": "Basic", "backendAddressPoolName": "bp2", "backendHttpSettingsName": "test-settings"}, {"name": "pb-rule1", "httpListenerName": "list2", "ruleType": "PathBasedRouting", "urlPathMapName": "pb-rule1"}], "webApplicationFirewallConfiguration": {"firewallMode": "Prevention", "ruleSetType": "OWASP", "ruleSetVersion": "3.0"}}}, {"subscriptionId": "2a8545f9-dc4c-43f5-aea4-7a4a5df8c835", "resourceGroupName": "mspnp", "id": "/subscriptions/2a8545f9-dc4c-43f5-aea4-7a4a5df8c835/resourceGroups/mspnp/providers/Microsoft.Network/ApplicationGateways/my-test-agw2", "name": "my-test-agw2", "location": "northeurope", "tags": {}, "properties": {"sku": {"size": "Medium", "capacity": 2, "tier": "WAF"}, "sslPolicy": {"policyType": "Custom", "cipherSuites": ["TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384", "TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256", "TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA"], "minProtocolVersion": "TLSv1_2"}, "gatewayIPConfigurations": [{"name": "appGatewayIpConfig", "subnetName": "default2"}], "frontendIPConfigurations": [{"subscriptionId": "2a8545f9-dc4c-43f5-aea4-7a4a5df8c835", "resourceGroupName": "mspnp", "location": "northeurope", "name": "appGatewayFrontendIP", "applicationGatewayType": "Public"}, {"subscriptionId": "2a8545f9-dc4c-43f5-aea4-7a4a5df8c835", "resourceGroupName": "mspnp", "location": "northeurope", "name": "testfec", "applicationGatewayType": "Internal", "internalApplicationGatewaySettings": {"subnetName": "default2"}}], "frontendPorts": [{"name": "appGatewayFrontendPort", "port": 80}, {"name": "list1-http1", "port": 81}, {"name": "list-http2", "port": 82}], "probes": [{"name": "p1", "protocol": "Http", "host": "contoso.com", "path": "/", "interval": 30, "timeout": 30, "unhealthyThreshold": 3, "match": {}}], "backendAddressPools": [{"name": "appGatewayBackendPool", "backendAddresses": [{"fqdn": "www.contoso.com"}]}, {"name": "bp2"}], "backendHttpSettingsCollection": [{"name": "appGatewayBackendHttpSettings", "port": 80, "protocol": "Http", "cookieBasedAffinity": "Disabled", "requestTimeout": 30, "probeEnabled": true}, {"name": "test-settings", "port": 80, "protocol": "Http", "cookieBasedAffinity": "Enabled", "requestTimeout": 20, "probeEnabled": true, "probeName": "p1"}], "httpListeners": [{"name": "appGatewayHttpListener", "frontendIPConfigurationName": "appGatewayFrontendIP", "frontendPortName": "appGatewayFrontendPort", "protocol": "Http"}, {"name": "list1", "frontendIPConfigurationName": "testfec", "frontendPortName": "list1-http1", "protocol": "Http"}, {"name": "list2", "frontendIPConfigurationName": "testfec", "frontendPortName": "list-http2", "protocol": "Http"}], "urlPathMaps": [{"name": "pb-rule1", "defaultBackendAddressPoolName": "appGatewayBackendPool", "defaultBackendHttpSettingsName": "appGatewayBackendHttpSettings", "pathRules": [{"name": "p1", "paths": ["/foo"], "backendAddressPoolName": "bp2", "backendHttpSettingsName": "test-settings"}, {"name": "p2", "paths": ["/bar"], "backendAddressPoolName": "appGatewayBackendPool", "backendHttpSettingsName": "appGatewayBackendHttpSettings"}]}], "requestRoutingRules": [{"name": "rule1", "httpListenerName": "appGatewayHttpListener", "ruleType": "Basic", "backendAddressPoolName": "appGatewayBackendPool", "backendHttpSettingsName": "appGatewayBackendHttpSettings"}, {"name": "rule2", "httpListenerName": "list1", "ruleType": "Basic", "backendAddressPoolName": "bp2", "backendHttpSettingsName": "test-settings"}, {"name": "pb-rule1", "httpListenerName": "list2", "ruleType": "PathBasedRouting", "urlPathMapName": "pb-rule1"}], "webApplicationFirewallConfiguration": {"firewallMode": "Prevention", "ruleSetType": "OWASP", "ruleSetVersion": "3.0"}}}]}, "publicIpAddresses": {"value": [{"subscriptionId": "2a8545f9-dc4c-43f5-aea4-7a4a5df8c835", "resourceGroupName": "mspnp", "id": "/subscriptions/2a8545f9-dc4c-43f5-aea4-7a4a5df8c835/resourceGroups/mspnp/providers/Microsoft.Network/publicIPAddresses/appGatewayFrontendIP-pip", "name": "appGatewayFrontendIP-pip", "location": "northeurope", "sku": "Basic", "properties": {"publicIPAllocationMethod": "Dynamic", "publicIPAddressVersion": "IPv4"}}]}, "deploymentContext": {"value": {"parentTemplateUniqueString": "bb-001", "sasToken": ""}}}}